\chapter{Prehľad a súvisiaca literatúra}

\label{kap:du} % id kapitoly pre prikaz ref

V tejto kapitole sa zameriame na prehľad témy API tokenov a súvisiacu literatúru, ktorá sa venuje nami skúmanej problematike. Popíšeme, čomu sa nižšie uvedené zdroje venujú a ako sa líšia od cieľov našej práce.

\section{Prehľad}
Ako prvé si v krátkosti predstavíme tému API tokenov a vysvetlíme základné pojmy. API token (ďalej token) je identifikátor, ktorý sa používa na autorizáciu prípadne aj identifikáciu používateľa pri prístupe k API. Používateľom v tomto kontexte môže byť webová aplikácia, server alebo iný program, ďalej ich súhrnne budeme označovať ako klient. 

Token typicky vydáva autentifikačný server danej API, voči ktorému sa klient autentifikuje, zväčša prihlasovacím menom a heslom. Následne autentifikačný server vytvorí token pre klienta a tento token bude používať klient pri ďalších požiadavkách na API. Token je typicky uložený v pamäti klienta a pri každej požiadavke na API je posielaný spolu s inými údajmi. Tokeny sa môžu vytvárať pomocou šifrovania, elektronických podpisov alebo hashovania. Napríklad šifrovanie v prípade, ak chceme chrániť citlivé údaje v tokene, elektronické podpisy sa využívajú v prípade, ak chceme overiť, že token bol vytvorený autentifikačným serverom a hešovanie je vhodné v prípade, ak chceme overiť, že token nebol modifikovaný.

\section{Súvisiaca literatúra}
K problematike rôznych typov tokenov nie sú dostupné odborné články alebo knihy a odborná literatúra spočíva najmä z príspevkov na blogoch a technických špecifikácií autentifikačných a autorizačných protokolov a konkrétnych tokenov. Zamerali sme sa na blog najširší záber tokenov.

\section{Porovnanie do šírky}
Tokeny sa môžu líšiť štrukturálne. To znamená, ktorou dátovou štruktúrou sú reprezentované a akú informáciu v sebe nesú. Obyčajne takto delíme tokeny na nepriehľadné (angl. opaque) a štruktúrované. Nepriehľadné tokeny predstavujú náhodné reťazce, ktoré neobsahujú (ani v zašifrovanej podobe) relevantnú informáciu, naopak štrukturované tokeny obsahujú navyše informáciu vhodnú pre API, napríklad napríklad môže obsahovať identifikátor používateľa, pre ktorého bol vydaný, čas vytvorenia alebo dátum expirácie.

Širokospektrálnemu prehľadu hlavne štrukturovaných typov tokenov sa venuje na svojom blogu \cite{tokens_comparison} Thomas Ptacek. V texte najprv uvádza najjendnoduchšii typ tokenu a to nepriehľadný token pozostávajúci z náhodného reťazca a označuje ho ako náhodný token. Náhodný token je výhodný, lebo na jeho vydanie ani overenie netreba počítať zložité kryptografické funkcie. Jednoducho sa vygeneruje náhodný reťazec. Problém náhodných tokenov je, že si API potrebuje udržiavať zoznam aktívnych tokenov a im zodpovedajúcim metadát ako napríklad používateľa, pre ktorého bol token vydaný, ku ktorým volaniam má prístup, či časovú pečiatku dokedy je daný token platný.

Neskôr prechádza postupne viacero typov tokenov ako JSON web token (JWT), PASETO, CAT (z anglického Crypto Auth Token) a makaróny (angl. macaroons). O každom sa dozvieme ako je daný token reprezentovaný a ďalej sa autor venuje hlavne kryptografickej bezpečnosti. Autor pomyselne rozdelí tokeny na 'podobné JWT' a 'Anti-JWT'.

\subsection{podobné JWT}

Tu sa zameriava na porovnanie JWT a POSETO. Oba sú štrukturované a kým JWT, ako z názvu vyplýva, je reprezentovaný štruktúrou JSON, PASETO môže byť v niektorých verziách zachytený aj štruktúrou CBOR (z anglického Concise Binary Object Representation). Ptacek hlavne rozvýja problémy JWT, ktorý označuje za "kryptografický neporiadok". JWT dovoľuje programátorovi si vybrať kryptografické zabezpečenie z veľa rôznych symetrických aj asymetrických riešení. Týmto sa otvárajú dvere bezpečtnostým zraniteľnostiam. Napríklad problém známy ako RSAtoHMAC \cite{vulnerabilities} využíva fakt, že pri verifikovaní nechávame útočníka si vybrať, ktorá metóda sa používa na verifikáciu tokenu.

Problémy, ktoré má JWT sa snaží vyriešiť PASETO. Verzionuju celý protokol a nepridáva nové možnosti pre programátora vrámci jednej verzie, čím sa snaží vyvarovať spomínanému 'kryptografickému neporiadku'. Najväčší problém PASETO, ktorý autor vypichuje je viacero aktuálnych verzii. PASETO má spolu 8 verzii, z ktorých až 4 sú označené za aktuálne.

Záverom jeho pozorovaní je, že je lepšie použiť PASETO, ale stále to nie je ideálne riešenie a silno naklonený k použitiu 'Anti-JWT' tokenov.

\subsection{Anti-JWT}

Anti-JWT tokeny sú tokeny, ktoré odstraňujú problémy JWT, lebo nepoužívajú podpisy ani zdieľané tajomstvo medzi API, autentifikačným serverom ani klientom. Autor uvádza CAT a makaróny. Obe tieto riešenia fungujú na základe 'zlatého kľuča', ktorý pozná len autentifikačný server. Z neho odvádza overovací kľúč pre API, z ktorého ďalej vytvorí generovací kľúč pre klienta. Klient si následne pomocou svojho kľúča vytvorí token, ktorý použije na prístup k API. API vie tento token overiť, lebo je vytvorený známym spôsobom z overovacieho kľúča, ktorý pozná.

Pri týchto protokoloch najviac vyzdvihuje flexibilnosť, jednoduchosť a najmä 'kryptografický poriadok', ktorý prinášajú. Kedy je jasné aký algortimus na krtypografické zabezpečenie.

\subsection{V čom je naše práca iná}

Ptacek sa vo svojom blogu venuje hlavne kryptografickej bezpečnosti tokenov. A celkovo robí prehľad najmä do šírky a nevenuje sa detailom jednotlivých protokolov. V našej práci chceme porovnávať tokeny podľa viacerých kritérií, teda spraviť komplexnejšie porovnanie. Tokeny budeme samozrejme porovnávať aj podľa bezpečnoti, keďže to je ich dôležitý aspekt. No navyše porovnáme aj ich flexibilnosť, škálovateľnosť, jednoduchosť, rýchlosť a ďalšie kritériá.